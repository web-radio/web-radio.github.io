import{_ as K,o as a,e as n,g as e,F as g,k as N,aK as P,z as V,A as J,d as R,bP as Q,a as W,u as j,r as k,bK as q,v as m,t as c,f as r,i,m as G,w as $,bC as L,aM as H,aL as X,aP as Y,l as w,C as O,bQ as B}from"./index-f6a38268.js";const Z={},z=_=>(V("data-v-6ecf2595"),_=_(),J(),_),x={class:"skeleton-loader"},tt=z(()=>e("div",{class:"skeleton-loader__image"},null,-1)),at=z(()=>e("div",{class:"skeleton-loader__name"},null,-1)),st={class:"skeleton-loader__details"},et=z(()=>e("div",{class:"skeleton-loader__actions"},[e("div",{class:"skeleton-loader__actions-button"}),e("div",{class:"skeleton-loader__actions-button"}),e("div",{class:"skeleton-loader__actions-button"})],-1));function ot(_,d){return a(),n("div",x,[tt,at,e("div",st,[(a(),n(g,null,N([68,120,56,78,95,43,56],(l,u)=>e("div",{class:"skeleton-loader__details-chip",key:u,style:P({width:l+"px"})},null,4)),64))]),et])}const nt=K(Z,[["render",ot],["__scopeId","data-v-6ecf2595"]]),U=_=>(V("data-v-9fc77257"),_=_(),J(),_),it={class:"card__background"},lt=["src"],dt={key:1,class:"material-symbols-rounded card__station-icon"},rt={class:"card__name"},ut={key:0,class:"material-symbols-rounded"},ct={class:"card__details"},_t={key:0,class:"card__details-chip"},vt={key:1,class:"card__details-chip"},mt=U(()=>e("span",{class:"material-symbols-rounded"},"translate",-1)),pt={key:2,class:"card__details-chip"},Ut=U(()=>e("span",{class:"material-symbols-rounded"},"verified",-1)),yt={class:"card__details-chip"},ht=U(()=>e("span",{class:"material-symbols-rounded"},"visibility",-1)),ft={class:"card__details-chip"},bt=U(()=>e("span",{class:"material-symbols-rounded"},"thumb_up",-1)),kt={key:3,class:"card__details-chip"},It=U(()=>e("span",{class:"material-symbols-rounded"},"album",-1)),gt={key:4,class:"card__details-chip"},Dt=U(()=>e("span",{class:"material-symbols-rounded"},"speed",-1)),St={class:"card__actions"},Ct=U(()=>e("span",{class:"material-symbols-rounded",style:{"font-size":"20px"}},"info",-1)),$t=[Ct],wt=["disabled"],Nt=U(()=>e("span",{class:"material-symbols-rounded",style:{"font-size":"20px"}},"thumb_up",-1)),Bt=[Nt],zt={key:0,class:"material-symbols-rounded"},At={key:1,class:"spinner spinner--small"},Et={key:2,class:"material-symbols-rounded"},Mt={key:3,class:"material-symbols-rounded"},Tt=R({__name:"station-card",props:{data:{}},setup(_){const d=Q(),l=W();j();const u=k(!1);return(t,s)=>{var y,h,p,D,I,b,o,f;return a(),n("div",{class:$(["card",{card__active:((y=i(l).station)==null?void 0:y.stationUUID)==t.data.stationUUID}]),style:P({"background-image":((h=i(l).station)==null?void 0:h.stationUUID)==t.data.stationUUID&&t.data.faviconUrl?`url(${t.data.faviconUrl})`:""})},[e("div",it,[!u.value&&t.data.faviconUrl?(a(),n("img",{key:0,loading:"lazy",ref:"stationLogo",class:"card__image",src:t.data.faviconUrl,onError:s[0]||(s[0]=q(v=>u.value=!0,["prevent"]))},null,40,lt)):(a(),n("div",dt," radio ")),e("div",rt,[m(c(t.data.name.trim()?t.data.name.trim():t.$t("station.withoutName"))+" ",1),t.data.hasExtendedInfo?(a(),n("span",ut,"verified")):r("",!0)]),e("div",ct,[t.data.countryCode?(a(),n("div",_t,[m(c(i(G)(t.data.countryCode))+" "+c(t.data.countryName.length<=20?t.data.countryName:t.data.countryCode),1),t.data.state?(a(),n(g,{key:0},[m(", "+c(t.data.state),1)],64)):r("",!0)])):r("",!0),t.data.languageNames?(a(),n("div",vt,[mt,m(" "+c(t.data.languageNames.length<=20||!t.data.languageCodes?t.data.languageNames:t.data.languageCodes),1)])):r("",!0),t.data.hasExtendedInfo?(a(),n("div",pt,[Ut,m(" "+c(t.$t("station.verified")),1)])):r("",!0),e("div",yt,[ht,m(" "+c(t.data.clickCount)+" (24h) ",1)]),e("div",ft,[bt,m(" "+c(t.data.votes),1)]),t.data.codec!=="UNKNOWN"?(a(),n("div",kt,[It,m(" "+c(t.data.codec),1)])):r("",!0),t.data.bitrate?(a(),n("div",gt,[Dt,m(" "+c(t.data.bitrate)+" kbps ",1)])):r("",!0),(a(!0),n(g,null,N(t.data.tags.filter(v=>v&&v.length<=25),(v,S)=>(a(),n("div",{class:"card__details-chip",key:S},c(v),1))),128))]),e("div",St,[e("button",{class:$(["icon-button icon-button--small",{"icon-button--active":((p=i(l).station)==null?void 0:p.stationUUID)===t.data.stationUUID}]),onClick:s[1]||(s[1]=v=>i(d).push(`/s/${t.data.stationUUID}`))},$t,2),e("button",{class:$(["icon-button icon-button--small",{"icon-button--active":i(l).votedStations.includes(t.data.stationUUID)||((D=i(l).station)==null?void 0:D.stationUUID)===t.data.stationUUID,"icon-button--filled-icon":i(l).votedStations.includes(t.data.stationUUID)}]),onClick:s[2]||(s[2]=v=>i(l).voteForStation(t.data)),disabled:i(l).votedStations.includes(t.data.stationUUID)},Bt,10,wt),e("button",{class:$(["icon-button icon-button--small",{"icon-button--active":((I=i(l).station)==null?void 0:I.stationUUID)===t.data.stationUUID}]),onClick:s[3]||(s[3]=v=>i(l).play(t.data))},[((b=i(l).station)==null?void 0:b.stationUUID)===t.data.stationUUID&&i(l).audio.error?(a(),n("span",zt," error ")):((o=i(l).station)==null?void 0:o.stationUUID)===t.data.stationUUID&&i(l).audio.waiting?(a(),n("div",At)):((f=i(l).station)==null?void 0:f.stationUUID)!==t.data.stationUUID||i(l).audio.paused?(a(),n("span",Et," play_arrow ")):(a(),n("span",Mt," pause "))],2)])])],6)}}}),Ft=K(Tt,[["__scopeId","data-v-9fc77257"]]),Lt={class:"stations-list"},Ot={key:0,class:"headline"},Kt={key:1,class:"stations-list__cards"},Vt=R({__name:"stations-list",props:{name:{},params:{},showMoreButton:{type:Boolean},stationsUUIDs:{},noStationsIcon:{},noStationsText:{}},setup(_){const d=_,l=j(),u=k(!0),t=k(!1),s=k(null),y=k(!1),h=k(!0);async function p(){s.value=null,u.value=!0,t.value=!1;try{const o=await I();s.value=d.stationsUUIDs?B(d.stationsUUIDs,o):o}catch{t.value=!0}u.value=!1}async function D(){u.value=!0;try{const o=await I();s.value=Array.isArray(s.value)?s.value.concat(o):o}catch{}u.value=!1}async function I(){var o;return d.stationsUUIDs?B(d.stationsUUIDs,await l.apiClient.getStationsByUUIDs({stationUUIDs:d.stationsUUIDs})):await l.apiClient.searchStations({offset:(o=s.value)==null?void 0:o.length,...d.params})}let b=null;return L(()=>d.params,(o,f)=>{JSON.stringify(o)!=JSON.stringify(f)&&(b&&clearTimeout(b),b=setTimeout(async()=>{h.value?await p():y.value=!0},750))}),L(()=>d.stationsUUIDs,()=>{d.stationsUUIDs&&(s.value&&d.stationsUUIDs.every(o=>s.value.find(f=>f.stationUUID===o))?s.value=B(d.stationsUUIDs,s.value):h.value?p():y.value=!0)}),H(async()=>{await p()}),X(async()=>{h.value=!0,y.value&&await p(),y.value=!1}),Y(()=>{h.value=!1}),(o,f)=>{var v,S,A,E,M,T,F;return a(),n("div",Lt,[o.name?(a(),n("p",Ot,c(o.name),1)):r("",!0),(v=s.value)!=null&&v.length||u.value?(a(),n("div",Kt,[(S=s.value)!=null&&S.length?(a(!0),n(g,{key:0},N(s.value,C=>(a(),w(i(Ft),{key:C.stationUUID,data:C},null,8,["data"]))),128)):r("",!0),u.value?(a(!0),n(g,{key:1},N(((A=d.params)==null?void 0:A.limit)??((E=d.stationsUUIDs)==null?void 0:E.length)??20,C=>(a(),w(i(nt),{key:C}))),128)):r("",!0)])):r("",!0),t.value?(a(),w(i(O),{key:2,type:"info",icon:"error",text:o.$t("error"),"button-icon":"refresh",onButtonClick:p},null,8,["text"])):r("",!0),((M=s.value)==null?void 0:M.length)===0&&!u.value&&!t.value?(a(),w(i(O),{key:3,type:"info",icon:o.noStationsIcon,text:o.noStationsText},null,8,["icon","text"])):r("",!0),!u.value&&d.params&&((T=s.value)!=null&&T.length)&&((F=s.value)==null?void 0:F.length)%d.params.limit===0&&o.showMoreButton?(a(),n("button",{key:4,class:"block-button",style:{"margin-top":"40px"},onClick:D},c(o.$t("moreResults")),1)):r("",!0)])}}});export{Vt as _};
